<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>بوابة التوعية بأمن كلمات المرور</title><link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><style>
        /* توضيح: بدء قسم تعريف الأنماط (CSS) */
        /* ------------------- الأنماط العامة وإعدادات الصفحة ------------------- */
        :root {
            /* توضيح: تعريف متغيرات CSS (Variables) للوضع الفاتح لتسهيل التبديل لاحقاً للوضع الداكن */
            --bg-color: #f0f4f8; /* لون خلفية الصفحة */
            --main-text-color: #1e293b; /* لون الكلام الرئيسي */
            --page-bg: #ffffff; /*لون الصفحة الداخلية للبطاقات */
            --card-bg: #f9fbfd; /* خلفية البطاقات الداخلية للاقسام */
            --primary-color: #0074a8; /* لون القائمة الجانبية في الوضع العادي */
            --secondary-color: #00567f; /* لون العناوين */
            --light-blue: #0091ff; /* لون المؤشر وقت التحديد */
            --border-color: #b0b0b0;/* لون حدود الحقول غير النشطة */
            --input-bg-normal: #ffffff;/* خلفية حقول الإدخال */
            --input-focus-border: #009cf0;/* لون حدود الحقول وقت التركيز */
            --shadow-light: 0 4px 12px rgba(0, 247, 255, 0.763);/* ظل خفيف للواجهات الداخلية*/
            --toggle-bg-off: #ccc; /* لون المفتاح عندما يكون مطفأ */
            --toggle-bg-on: #2ecc71; /* لون المفتاح عندما يكون مشغلا */
            --toggle-circle: #ffffff; /* لون الدائرة المتحركة */
        }

        /* ------------------- الوضع الداكن (Dark Mode) ------------------- */
        body.dark-mode {
            /* توضيح: إعادة تعريف متغيرات الألوان عند تفعيل كلاس 'dark-mode' */
            --bg-color: #121212; /*لون الخلفيه الداكن */
            --main-text-color: #c9d1d9;/* لون الكلام الفاتح */
            --page-bg: #222222; /* لون الصفحة الداخلية الداكن */
            --card-bg: #21262d; /*لون خلفية بطاقات الفحص */
            --primary-color: #0074a8;/*لون القائمة الجانبية */ 
            --secondary-color: #81d4fa; /* لون العناوين الفاتح */
            --light-blue: #009cf0;/* لون المؤشر وقت التحديد */
            --border-color: #30363d;/* لون الحدود الداكنة */
            --input-border: #444;/* لون أطراف الحقول */
            --input-bg-normal: #1a1a1a;/* خلفية حقول الإدخال الداكنة */
            --input-focus-border: #58a6ff;/*لون حدود البطاقات وقت التحديد */
            --input-placeholder-normal: #6e7681;/* لون النص المؤقت في الحقول */
            --shadow-light: 0 4px 12px rgba(0, 247, 255, 0.763);/*ظل الواجهه الداخلية الداكن */
        }

        body {
            /* توضيح: الأنماط الأساسية للجسم (تطبيق الخط واللون واتجاه الـ RTL) */
            font-family: 'Tajawal', sans-serif; /* توضيح: تطبيق خط Tajawal */
            background-color: var(--bg-color); /* توضيح: تطبيق لون خلفية الصفحة */
            color: var(--main-text-color); /* توضيح: تطبيق لون النص الرئيسي */
            direction: rtl; /* توضيح: تعيين اتجاه الكتابة من اليمين لليسار */
            margin: 0; /* توضيح: إزالة الهوامش الخارجية */
            padding: 0; /* توضيح: إزالة الهوامش الداخلية */
            display: flex; /* توضيح: تفعيل نموذج Flexbox للتخطيط */
            min-height: 100vh; /* توضيح: ضمان أن الجسم يملأ ارتفاع الشاشة بالكامل */
            transition: background-color 0.5s, color 0.5s; /* توضيح: حركة سلسة لتغيير الألوان (للوضع الداكن) */
        }
        
        /* ------------------- إخفاء العدادات من حقول الأرقام ------------------- */
        /* توضيح: إزالة أسهم العدادات في متصفحات WebKit (Chrome/Safari) */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; /* توضيح: إزالة المظهر الافتراضي للمتصفح */
            margin: 0; /* توضيح: إزالة أي مسافة متبقية من العداد */
        }

        /* توضيح: إزالة أسهم العدادات في متصفح Firefox */
        input[type=number] {
            -moz-appearance: textfield; /* توضيح: إجبار المتصفح على معاملته كنص عادي */
        }
        /* ------------------- نهاية إخفاء العدادات ------------------- */
        
        /* ------------------- أنماط الشعار الثابت في الزاوية ------------------- */
        .fixed-logo-wrapper { 
            /* توضيح: تثبيت الشعار في الزاوية اليسرى العليا */
            position: fixed; /* توضيح: تثبيت العنصر في مكانه بالنسبة لإطار العرض */
            top: 15px; /* توضيح: مسافة 15 بكسل من الأعلى */
            left: 15px; /* توضيح: مسافة 15 بكسل من اليسار */
            right: auto; /* توضيح: إلغاء تثبيته من اليمين */
            z-index: 100; /* توضيح: وضعه في طبقة علوية */
            background-color: var(--page-bg); /* توضيح: خلفية بيضاء/داكنة للشعار */
            padding: 8px; /* توضيح: مسافة داخلية */
            border-radius: 12px; /* توضيح: حواف مستديرة */
            box-shadow: var(--shadow-light); /* توضيح: تطبيق ظل خفيف */
            display: flex; /* توضيح: تفعيل فليكس بوكس لتوسيط المحتوى الداخلي */
            align-items: center; /* توضيح: توسيط رأسي */
            justify-content: center; /* توضيح: توسيط أفقي */
        }
        .ksu-logo { 
            /* توضيح: تحديد حجم الشعار */
            width: 140px; /* توضيح: عرض الشعار */
            height: auto; /* توضيح: ارتفاع تلقائي للحفاظ على نسبة الأبعاد */
            display: block; /* توضيح: عرض ككتلة لضبط الهوامش بدقة */
        }
        
        /* ------------------- 1. أنماط القائمة الجانبية (Sidebar) ------------------- */
        .sidebar {
            /* توضيح: الشريط الجانبي المخفي (يظهر من اليمين) */
            height: 100%; /* توضيح: ارتفاع كامل الشاشة */
            width: 0; /* توضيح: عرض صفر (مخفي افتراضياً) */
            position: fixed; /* توضيح: تثبيت القائمة */
            z-index: 300; /* توضيح: وضعه فوق كل شيء */
            top: 0; /* توضيح: يبدأ من الأعلى */
            right: 0; /* توضيح: تثبيته على اليمين */
            background-color: var(--primary-color); /* توضيح: لون الخلفية الأساسي للقائمة */
            overflow-x: hidden; /* توضيح: إخفاء التمرير الأفقي */
            transition: 0.5s; /* توضيح: حركة سلسة عند الفتح/الإغلاق */
            box-shadow: -4px 0 10px rgba(0, 0, 0, 0.4); /* توضيح: ظل جانبي */
        }
        .sidebar-button {
            /* توضيح: تنسيق أزرار التنقل */
            padding: 18px 25px; /* توضيح: مسافة داخلية للأزرار */
            font-size: 1.15rem; /* توضيح: حجم الخط */
            color: #f1f1f1; /* توضيح: لون النص الفاتح */
            display: block; /* توضيح: عرض ككتلة */
            transition: 0.3s; /* توضيح: حركة سلسة */
            border-bottom: 1px solid rgba(255,255,255,0.1); /* توضيح: خط فاصل خفيف */
            font-weight: 700; /* توضيح: خط سميك */
            background: none; /* توضيح: إزالة خلفية الزر */
            border: none; /* توضيح: إزالة حدود الزر */
            width: 100%; /* توضيح: عرض كامل */
            cursor: pointer; /* توضيح: مؤشر الفأرة كيد */
            text-align: right; /* توضيح: محاذاة النص لليمين */
            box-sizing: border-box; /* توضيح: تضمين البادينغ في العرض */
        }
        .sidebar-button.disabled {
            /* توضيح: تعتيم الزر المعطل (الاختبار) */
            opacity: 0.6; /* توضيح: شفافية أقل */
            cursor: not-allowed; /* توضيح: مؤشر ممنوع */
            background-color: rgba(0,0,0,0.1) !important; /* توضيح: فرض خلفية معتمة */
        }
        .sidebar-button:hover:not(.disabled), .sidebar-button.active {
            /* توضيح: تأثير التمرير والتفعيل */
            background-color: var(--light-blue); /* توضيح: لون أزرق ساطع للخلفية */
            color: white; /* توضيح: لون نص أبيض */
        }

        /* ------------------- زر الإغلاق (X) ------------------- */
        .close-btn {
            /* توضيح: تنسيق زر الإغلاق داخل القائمة */
            position: absolute; /* توضيح: وضع مطلق ضمن الشريط الجانبي */
            top: 10px; /* توضيح: مسافة 10 بكسل من الأعلى */
            left: 10px; /* توضيح: مسافة 10 بكسل من اليسار */
            font-size: 32px; /* توضيح: حجم الخط/الأيقونة */
            color: #fff; /* توضيح: لون أبيض */
            background-color: rgba(255, 255, 255, 0.2); /* توضيح: خلفية شفافة */
            border-radius: 50%; /* توضيح: شكل دائري */
            width: 40px; /* توضيح: عرض الدائرة */
            height: 40px; /* توضيح: ارتفاع الدائرة */
            line-height: 40px; /* توضيح: توسيط الأيقونة عمودياً */
            text-align: center; /* توضيح: توسيط الأيقونة أفقياً */
            cursor: pointer; /* توضيح: مؤشر الفأرة كيد */
            text-decoration: none; /* توضيح: إزالة خط الروابط */
            transition: background-color 0.3s; /* توضيح: حركة سلسة للخلفية */
        }

        /* ------------------- حاوية التحكم العلوية ------------------- */
        .top-controls {
            /* توضيح: حاوية زر الفتح في الزاوية اليمنى */
            position: fixed; /* توضيح: تثبيت الموقع */
            top: 15px; /* توضيح: مسافة من الأعلى */
            right: 15px; /* توضيح: مسافة من اليمين */
            z-index: 200; /* توضيح: وضعه فوق المحتوى ولكن تحت الشريط الجانبي */
            display: flex; /* توضيح: تفعيل فليكس بوكس */
            align-items: center; /* توضيح: محاذاة العناصر عمودياً */
            gap: 10px; /* توضيح: مسافة بين العناصر */
            transition: right 0.5s; /* توضيح: الحركة عند فتح الشريط الجانبي */
        }
        
        /* ------------------- زر الوضع الداكن داخل القائمة الجانبية ------------------- */
        .dark-mode-btn-sidebar {
            /* توضيح: تنسيق زر تبديل الوضع الداكن داخل الشريط الجانبي */
            display: flex; /* توضيح: تفعيل فليكس بوكس */
            align-items: center; /* توضيح: محاذاة عمودية */
            justify-content: flex-end; /* توضيح: محاذاة العناصر لليمين */
            gap: 10px; /* توضيح: مسافة بين النص والأيقونة */
            padding: 18px 25px; /* توضيح: مسافة داخلية */
            font-size: 1.1rem; /* توضيح: حجم الخط */
            color: #f1f1f1; /* توضيح: لون النص */
            background-color: rgba(0,0,0,0.1); /* توضيح: خلفية شفافة قليلاً */
            cursor: pointer; /* توضيح: مؤشر الفأرة كيد */
            border-bottom: 1px solid rgba(255,255,255,0.1); /* توضيح: خط فاصل سفلي */
            transition: background-color 0.3s; /* توضيح: حركة الخلفية */
        }
        
        /* ------------------- أنماط المحتوى الرئيسي ------------------- */
        .main-content {
            /* توضيح: منطقة المحتوى الرئيسية التي تتحرك مع الـ Sidebar */
            transition: margin-right .5s; /* توضيح: حركة الهامش عند فتح الـ Sidebar */
            padding: 40px 20px 20px; /* توضيح: مسافة داخلية */
            width: 100%; /* توضيح: عرض كامل */
            padding-top: 100px; /* توضيح: مسافة علوية لتجنب تداخل الشعار */
            display: flex; /* توضيح: تفعيل فليكس بوكس */
            flex-direction: column; /* توضيح: ترتيب العناصر عمودياً */
            align-items: center; /* توضيح: توسيط العناصر أفقياً */
        }
        
        .page-content {
            /* توضيح: أنماط البطاقة الرئيسية (الخلفية البيضاء/الداكنة) */
            display: none; /* توضيح: مخفي افتراضياً */
            width: 100%; /* توضيح: عرض كامل داخل الـ main-content */
            max-width: 900px; /* توضيح: أقصى عرض للبطاقة */
            background-color: var(--page-bg); /* توضيح: لون خلفية البطاقة */
            padding: 40px 60px; /* توضيح: مسافة داخلية كبيرة */
            margin-bottom: 40px; /* توضيح: مسافة سفلية */
            border-radius: 16px; /* توضيح: حواف مستديرة */
            box-shadow: var(--shadow-light); /* توضيح: ظل خارجي */
            box-sizing: border-box; /* توضيح: احتساب البادينغ ضمن العرض */
            transition: background-color 0.5s, color 0.5s; /* توضيح: حركة ألوان سلسة */
        }
        .page-content.active {
            /* توضيح: إظهار البطاقة النشطة */
            display: block; 
        }

        h1 { 
            /* توضيح: تنسيق العنوان الرئيسي */
            color: var(--secondary-color); /* توضيح: لون العنوان من المتغيرات */
            margin-bottom: 50px; /* توضيح: مسافة سفلية */
            font-weight: 800; /* توضيح: وزن الخط (سميك جداً) */
            text-align: center; /* توضيح: توسيط النص */
            border-bottom: 3px solid var(--secondary-color); /* توضيح: خط سفلي */
            padding-bottom: 15px; /* توضيح: مسافة أسفل الخط */
            font-size: 2.5rem; /* توضيح: حجم الخط */
        }
        h2 { 
            /* توضيح: تنسيق العناوين الفرعية مع توسيط الأيقونة والنص */
            color: var(--secondary-color); /* توضيح: لون العنوان */
            margin-bottom: 35px; /* توضيح: مسافة سفلية */
            font-weight: 700; /* توضيح: خط سميك */
            font-size: 2rem; /* توضيح: حجم الخط */
            display: flex; /* توضيح: تفعيل فليكس بوكس */
            align-items: center; /* توضيح: محاذاة عمودية */
            justify-content: center; /* توضيح: محاذاة أفقية */
        }
        h2 i {
            /* توضيح: مسافة الأيقونة عن النص */
            margin-left: 15px; /* توضيح: مسافة يسار الأيقونة */
            color: var(--light-blue); /* توضيح: لون الأيقونة */
        }
        
        /* ------------------- أنماط حقول تسجيل الدخول (Inputs) ------------------- */
        .login-form-area {
            /* توضيح: تخطيط شبكي لحقول البيانات */
            display: grid; /* توضيح: استخدام تخطيط Grid */
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* توضيح: أعمدة متكيفة */
            gap: 30px; /* توضيح: مسافة بين الخلايا */
            padding: 30px; /* توضيح: مسافة داخلية */
            background-color: transparent; /* توضيح: خلفية شفافة */
            border-radius: 12px; /* توضيح: زوايا مستديرة */
            box-shadow: none; /* توضيح: إزالة الظل */
        }
        .login-form-area label {
            /* توضيح: تنسيق ملصقات الحقول */
            margin-bottom: 10px; /* توضيح: مسافة سفلية */
            font-weight: 700; /* توضيح: خط سميك */
            color: var(--secondary-color); /* توضيح: لون النص */
            font-size: 1.1rem; /* توضيح: حجم الخط */
        }
        .login-form-area input {
            /* توضيح: التنسيق العام لحقول الإدخال */
            width: 100%; /* توضيح: عرض كامل */
            padding: 14px 18px; /* توضيح: مسافة داخلية */
            border: 1px solid var(--border-color); /* توضيح: حدود رقيقة */
            border-radius: 8px; /* توضيح: زوايا مستديرة */
            box-sizing: border-box; /* توضيح: احتساب البادينغ ضمن العرض */
            font-size: 1.05rem; /* توضيح: حجم الخط */
            text-align: right; /* توضيح: محاذاة النص لليمين */
            transition: border-color 0.3s, background-color 0.3s, box-shadow 0.3s; /* توضيح: حركة سلسة */
            color: var(--main-text-color); /* توضيح: لون النص */
            background-color: var(--input-bg-normal); /* توضيح: خلفية الحقل */
            border: 1px solid #ccc; /* توضيح: حد رمادي رقيق */
        }
        
        .login-form-area input:focus {
            /* توضيح: تأثير التركيز على الحقل */
            border-color: var(--input-focus-border); /* توضيح: تغيير لون الحد */
            box-shadow: 0 0 0 3px rgba(0, 156, 240, 0.2); /* توضيح: إضافة ظل خارجي */
            outline: none; /* توضيح: إزالة الحد الأزرق الافتراضي */
        }
        
        /* تنسيق حقول الإدخال للوضع الداكن */
        body.dark-mode .login-form-area input {
            /* توضيح: لون خلفية أغمق وخط أبيض/فاتح في الوضع الداكن */
            background-color: var(--input-bg-normal); /* توضيح: خلفية داكنة */
            border: none; /* توضيح: إزالة الحدود الخارجية */
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.5); /* توضيح: ظل داخلي لعمق الحقل */
            color: var(--main-text-color); /* توضيح: لون النص الفاتح */
        }
        body.dark-mode .login-form-area input::placeholder {
            /* توضيح: لون نص الـ Placeholder في الوضع الداكن */
            color: var(--input-placeholder-normal); 
        }

        .full-width { grid-column: 1 / -1; } /* توضيح: لجعل الحقل يمتد على عرض الشبكة بالكامل */

        /* ------------------- زر "لا يوجد" ------------------- */
        .no-data-btn {
            /* توضيح: تنسيق زر "لا يوجد" */
            background-color: var(--border-color); /* توضيح: خلفية رمادية فاتحة */
            color: var(--secondary-color); /* توضيح: لون نص داكن */
            border: 1px solid var(--border-color); /* توضيح: حد خفيف */
            padding: 12px 15px; /* توضيح: مسافة داخلية */
            border-radius: 8px; /* توضيح: زوايا مستديرة */
            font-size: 1rem; /* توضيح: حجم الخط */
        }
        .no-data-btn.active {
            /* توضيح: لون الزر عند تفعيله (الوضع العادي) */
            background-color: var(--primary-color); /* توضيح: لون أزرق أساسي */
            color: white; /* توضيح: نص أبيض */
            border-color: var(--primary-color); /* توضيح: حد أزرق */
        }
        body.dark-mode .no-data-btn {
            /* توضيح: لون الزر عند عدم تفعيله (الوضع الداكن) */
            background-color: #383838; /* توضيح: خلفية رمادية داكنة */
            color: #c9d1d9; /* توضيح: نص فاتح */
            border: 1px solid #444; /* توضيح: حد داكن */
        }
        body.dark-mode .no-data-btn.active {
            /* توضيح: لون الزر عند تفعيله (الوضع الداكن) */
            background-color: var(--primary-color); /* توضيح: لون أزرق أساسي */
            color: white; /* توضيح: نص أبيض */
            border-color: var(--primary-color); /* توضيح: حد أزرق */
        }

        /* ------------------- أنماط اختبار كلمة المرور (Test Page) ------------------- */
        .password-test-area {
            /* توضيح: حاوية الفحص */
            border: none; /* توضيح: إزالة أي حدود غير مرغوبة */
            padding: 0; /* توضيح: إزالة البادينغ */
            border-radius: 0; /* توضيح: إزالة استدارة الزوايا */
            box-shadow: none; /* توضيح: إزالة أي ظل */
            display: flex; /* توضيح: تفعيل فليكس بوكس */
            flex-direction: column; /* توضيح: ترتيب العناصر عمودياً */
            align-items: center; /* توضيح: توسيط العناصر أفقياً */
            width: 100%; /* توضيح: عرض كامل */
        }
        
        /* ------------------- حقل كلمة المرور (إصلاح اللون في الوضع الداكن) ------------------- */
        .password-field-container input {
            /* توضيح: تنسيق حقل كلمة المرور (عام) */
            padding: 14px 45px 14px 18px; /* توضيح: مسافة داخلية (لأجل أيقونة العين) */
            border-radius: 8px; /* توضيح: زوايا مستديرة */
        }
        body.dark-mode .password-field-container input {
            /* توضيح: تطبيق نمط الإدخال الداكن مع لون نص أبيض */
            background-color: var(--input-bg-normal); /* توضيح: خلفية داكنة */
            border: none; /* توضيح: إزالة الحدود */
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.5); /* توضيح: ظل داخلي لعمق الحقل */
            color: #FFFFFF; /* توضيح: لون النص أبيض صريح (الإصلاح المطلوب) */
        }
        body.dark-mode .password-field-container input::placeholder {
            /* توضيح: لون نص الـ Placeholder في الوضع الداكن */
            color: var(--input-placeholder-normal);
        }
        body.dark-mode .password-field-container .toggle-password {
            /* توضيح: لون أيقونة العين في الوضع الداكن */
            color: var(--secondary-color);
        }
        
        /* زر اقتراح كلمة مرور قوية */
        .generate-btn {
            /* توضيح: زر الاقتراح بلون أخضر ثابت */
            background-color: #2ecc71; /* توضيح: اللون الأخضر */
            color: white; /* توضيح: نص أبيض */
            padding: 12px 25px; /* توضيح: مسافة داخلية */
            border: none; /* توضيح: إزالة الحدود */
            border-radius: 8px; /* توضيح: زوايا مستديرة */
            cursor: pointer; /* توضيح: مؤشر الفأرة كيد */
            font-size: 1.1rem; /* توضيح: حجم الخط */
            margin-bottom: 25px; /* توضيح: مسافة سفلية */
            transition: background-color 0.3s, transform 0.2s; /* توضيح: حركات سلسة */
            box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3); /* توضيح: ظل خارجي */
            font-weight: 700; /* توضيح: خط سميك */
        }
        body.dark-mode .generate-btn { 
            /* توضيح: فرض اللون الأخضر للوضع الداكن */
            background-color: #2ecc71; 
            color: white;
        }
        body.dark-mode .generate-btn:hover {
            background-color: #27ae60; /* توضيح: لون أغمق عند التمرير */
        }

        /* ------------------- شريط القوة ورسائل الحالة ------------------- */
        .strength-feedback-container {
            /* توضيح: حاوية الشريط والرسالة (تصميم البطاقة) */
            width: 100%; /* توضيح: عرض كامل */
            max-width: 450px; /* توضيح: أقصى عرض */
            margin: 30px auto 15px auto; /* توضيح: توسيط وتحديد المسافة */
            border-radius: 12px; /* توضيح: زوايا مستديرة */
            overflow: hidden; /* توضيح: لإخفاء أي شيء يخرج من الحاوية */
            background-color: var(--card-bg); /* توضيح: خلفية البطاقة */
            box-shadow: var(--shadow-light); /* توضيح: ظل خفيف */
            border: 1px solid var(--border-color); /* توضيح: حد خفيف */
            transition: all 0.5s; /* توضيح: حركة سلسة */
        }
        
        /* تخصيص الوضع الداكن لحاوية الشريط */
        body.dark-mode .strength-feedback-container {
            background-color: var(--card-bg); /* توضيح: خلفية البطاقة الداكنة */
            border: 1px solid var(--input-border); /* توضيح: حد داكن */
            box-shadow: 0 4px 15px rgba(0,0,0,0.4); /* توضيح: ظل أغمق */
        }
        
        .strength-message {
            /* توضيح: تنسيق نص الرسالة */
            padding: 18px 15px; /* توضيح: مسافة داخلية */
            font-weight: 600; /* توضيح: خط شبه سميك */
            display: flex; /* توضيح: تفعيل فليكس بوكس */
            align-items: center; /* توضيح: محاذاة عمودية */
            justify-content: center; /* توضيح: محاذاة أفقية */
            font-size: 1.1rem; /* توضيح: حجم الخط */
            text-align: center; /* توضيح: توسيط النص */
            background-color: transparent !important; /* توضيح: جعل الخلفية شفافة لأخذ لون الحاوية */
            color: var(--main-text-color); /* توضيح: لون النص الأساسي */
            transition: color 0.5s; /* توضيح: حركة سلسة للون */
        }
        
        /* تعيين لون النص داخل الرسالة بناءً على حالة القوة */
        .msg-very-weak { color: #e74c3c !important; } /* توضيح: لون أحمر للضعيف جداً */
        .msg-weak { color: #f39c12 !important; } /* توضيح: لون برتقالي للضعيف */
        .msg-good { color: #2ecc71 !important; } /* توضيح: لون أخضر للفئة الجيدة */
        .msg-strong { color: #1abc9c !important; } /* توضيح: لون تركوازي للقوي */
        .msg-neutral { color: #6c757d !important; } /* توضيح: لون رمادي للمحايد */
        
        /* تعديل لون النص في الوضع الداكن */
        body.dark-mode .msg-very-weak { color: #ff8c8c !important; } /* توضيح: أحمر فاتح للداكن */
        body.dark-mode .msg-weak { color: #ffc170 !important; } /* توضيح: برتقالي فاتح للداكن */
        body.dark-mode .msg-good { color: #58d68d !important; } /* توضيح: أخضر فاتح للداكن */
        body.dark-mode .msg-strong { color: #48c4b1 !important; } /* توضيح: تركوازي فاتح للداكن */

        /* ------------------- شريط تقدم القوة (The Bar) ------------------- */
        .strength-bar {
            height: 10px;
            border-radius: 0; /* إزالة استدارة الزوايا من الشريط الداخلي */
            background: #e0e0e0;
            overflow: hidden;
            width: 100%; /* عرض كامل */
        }
        .bar { height: 100%; width: 0%; transition: width 0.4s ease, background-color 0.4s ease; }
        .very-weak { background: #e74c3c; } 
        .weak { background: #f39c12; }
        .good { background: #2ecc71; } 
        .strong { background: #1abc9c; }


        /* رسالة التوجيه بعد الإكمال */
        .completion-message {
            /* توضيح: تنسيق رسالة التوجيه الخضراء */
            margin-top: 30px; /* توضيح: مسافة علوية */
            padding: 20px; /* توضيح: مسافة داخلية */
            background-color: #d4edda; /* توضيح: خلفية خضراء فاتحة */
            color: #155724; /* توضيح: نص أخضر داكن */
            border-radius: 8px; /* توضيح: زوايا مستديرة */
            font-size: 1.1rem; /* توضيح: حجم الخط */
            font-weight: bold; /* توضيح: خط سميك */
            display: none; /* توضيح: مخفي افتراضياً */
        }
        
        /* ------------------- أنماط صفحة تواصل معنا ------------------- */
        /* (تنسيق الإيميلات الموحد الذي تم طلبه سابقًا) */
        .contact-info {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            width: 100%; 
        }
        .contact-info p { 
            font-size: 1.1rem; 
            margin: 10px 0; 
            padding: 12px 15px; 
            border-bottom: 1px solid #eee;
            width: 90%; 
            max-width: 550px; 
            text-align: right; 
            box-sizing: border-box;
            background-color: var(--card-bg); /* استخدام متغير الخلفية */
            border-radius: 6px;
            transition: background-color 0.3s;
        }
        .contact-info p:hover {
            background-color: var(--input-bg-normal); 
        }
        .contact-info p:last-of-type { 
            border-bottom: none; 
            margin-bottom: 0;
        }
        .contact-info p:first-child { 
            text-align: center; 
            background-color: transparent;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        .contact-info a {
            /* توضيح: لون روابط الإيميلات في الوضع العادي */
            color: #0088cc; 
            text-decoration: none; 
            font-weight: 700;
            transition: color 0.3s;
        }
        body.dark-mode .contact-info a {
            /* توضيح: لون روابط الإيميلات في الوضع الداكن */
            color: #66aaff; 
        }
        body.dark-mode .contact-info p {
            background-color: var(--card-bg);
            border-color: var(--input-border);
        }
        /* ------------------- أنماط قسم MFA (جديدة) ------------------- */
        .mfa-info {
            /* توضيح: تنسيق قسم المعلومات حول MFA */
            text-align: center;
            line-height: 1.8;
            font-size: 1.1rem;
        }
        .mfa-info h3 {
            /* توضيح: تنسيق العناوين الفرعية داخل قسم MFA */
            color: var(--primary-color);
            font-size: 1.5rem;
            margin-top: 30px;
            margin-bottom: 20px;
            font-weight: 700;
        }
        .mfa-steps {
            /* توضيح: تنسيق قائمة الخطوات (مثل شيء تعرفه/تملكه) */
            list-style: none; /* إزالة النقاط */
            padding: 0;
            margin-top: 20px;
            text-align: right;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .mfa-steps li {
            /* توضيح: تنسيق بطاقة لكل خطوة */
            background-color: var(--card-bg);
            padding: 15px;
            margin-bottom: 10px;
            border-right: 5px solid var(--light-blue); /* شريط أزرق جانبي مميز */
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-weight: 500;
        }
        body.dark-mode .mfa-steps li {
            /* توضيح: لون الشريط الجانبي في الوضع الداكن */
            border-right: 5px solid var(--secondary-color);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        /* توضيح: تنسيق زر المحاكاة للرمز */
        #send-code-btn {
            width: 100%;
            padding: 12px;
            font-weight: 700;
            background-color: #0074a8;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #send-code-btn:hover {
            background-color: #00567f;
        }

        
    </style>
</head>
<body onload="loadDarkMode(); switchTab('login-home')"><div class="fixed-logo-wrapper"><img src="https://i0.wp.com/ksalogo.com/wp-content/uploads/2025/01/King-Saud-University-01.png?fit=1000,1000&ssl=1" alt="شعار جامعة الملك سعود" class="ksu-logo" />
    </div>

    <div id="mySidebar" class="sidebar"><a href="javascript:void(0)" class="close-btn" onclick="closeNav()">&times;</a><button class="dark-mode-btn-sidebar" onclick="toggleDarkMode()">
            الوضع الداكن/الفاتح <i class="fa-solid fa-moon"></i> </button>

        <button class="sidebar-button" data-section="login-home" onclick="switchTab('login-home'); closeNav();">البيانات الشخصية</button><button class="sidebar-button disabled" data-section="test" id="test-tab-button" onclick="switchTab('test'); closeNav();">اختبار كلمة المرور</button><button class="sidebar-button" data-section="mfa" onclick="switchTab('mfa'); closeNav();">المصادقة متعددة العوامل (MFA)</button><button class="sidebar-button" data-section="contact" onclick="switchTab('contact'); closeNav();">تواصل معنا</button></div>

    <div class="top-controls"><div class="open-btn" onclick="openNav()"><i class="fa-solid fa-bars"></i>
        </div>
    </div>
    
    <div id="main" class="main-content"><h1>بوابة التوعية بأمن كلمات المرور</h1><div id="login-home" class="page-content login-home-section active"><h2><i class="fa-solid fa-user-circle"></i> أدخل بياناتك الشخصية</h2><p class="importance-text">
                **تُعتبر كلمة المرور خط الدفاع الأول عن معلوماتك الشخصية والحساسة على الإنترنت.** لضمان أقصى درجات الأمان، يجب أن نتجنب استخدام البيانات الشخصية الواضحة كجزء من كلمة المرور. **يُرجى ملء جميع الحقول المطلوبة (أو اختيار "لا يوجد") للمتابعة إلى الاختبار.**
            </p><div class="login-form-area" id="personal-data-form"><div class="input-group-container"><label for="full-name">الاسم الكامل:</label><input type="text" id="full-name" placeholder="Full Name" dir="ltr" oninput="checkAllFieldsFilled(); preventArabic(this);"></div><div class="input-group-container"><label for="id-number">رقم الهوية/الإقامة:</label><input type="number" id="id-number" placeholder="ID Number" dir="ltr" oninput="checkAllFieldsFilled()"></div><div class="input-group-container"><label for="mother-name">اسم الأم:</label><input type="text" id="mother-name" placeholder="Mother's Full Name" dir="ltr" oninput="checkAllFieldsFilled(); preventArabic(this);"></div><div class="input-group-container"><label for="father-name">اسم الأب:</label><input type="text" id="father-name" placeholder="Father's Full Name" dir="ltr" oninput="checkAllFieldsFilled(); preventArabic(this);"></div><div class="input-group-container"><label for="mobile-number">رقم الجوال:</label><input type="number" id="mobile-number" placeholder="Mobile Number" dir="ltr" oninput="checkAllFieldsFilled()">
                </div>
                
                <div class="input-group-container"><label for="job-id">الرقم الوظيفي:</label><div class="input-with-option">
                        <input type="number" id="job-id" placeholder="Job ID (if applicable)" dir="ltr" oninput="checkAllFieldsFilled()">
                        <button class="no-data-btn" data-field="job-id" onclick="toggleNoData(this)">لا يوجد</button>
                    </div>
                </div>
                <div class="input-group-container"><label for="student-id">الرقم الجامعي:</label><div class="input-with-option">
                        <input type="number" id="student-id" placeholder="Student ID" dir="ltr" oninput="checkAllFieldsFilled()">
                        <button class="no-data-btn" data-field="student-id" onclick="toggleNoData(this)">لا يوجد</button>
                    </div>
                </div>
                <div class="input-group-container"><label for="pet-name">اسم الحيوان الأليف:</label><div class="input-with-option">
                        <input type="text" id="pet-name" placeholder="Pet Name" dir="ltr" oninput="checkAllFieldsFilled(); preventArabic(this);">
                        <button class="no-data-btn" data-field="pet-name" onclick="toggleNoData(this)">لا يوجد</button>
                    </div>
                </div>
                <div class="input-group-container"><label for="pet-count">عدد الحيوانات:</label><div class="input-with-option">
                        <input type="number" id="pet-count" placeholder="Number of Pets" min="0" dir="ltr" oninput="checkAllFieldsFilled()">
                        <button class="no-data-btn" data-field="pet-count" onclick="toggleNoData(this)">لا يوجد</button>
                    </div>
                </div>
                
                <div class="full-width input-group-container"><label for="email-address">البريد الإلكتروني:</label>
                    <input type="email" id="email-address" placeholder="email@example.com" dir="ltr" oninput="checkAllFieldsFilled(); preventArabic(this);">
                </div>
                
                <div class="full-width input-group-container"><label for="email-confirm">تأكيد البريد الإلكتروني:</label>
                    <input type="email" id="email-confirm" placeholder="أعد إدخال الإيميل" dir="ltr" oninput="checkAllFieldsFilled(); preventArabic(this);">
                    <p id="email-mismatch-error" style="color: #e74c3c; margin-top: 5px; display: none; font-size: 0.95rem;">
                        ⚠️ البريد الإلكتروني غير متطابق.
                    </p></div>

                <div class="full-width input-group-container"><label for="verification-code">رمز التأكيد (محاكاة):</label>
                    <input type="number" id="verification-code" placeholder="أدخل الرمز المكون من 6 أرقام" dir="ltr" oninput="checkAllFieldsFilled()">
                    
                    <button type="button" id="send-code-btn" onclick="simulateSendCode()">
                        إرسال الرمز (محاكاة)
                    </button>
                    
                    <p id="simulated-code-display" style="color: #2ecc71; margin-top: 5px; font-weight: bold; display: none;">
                        الرمز المُرسل: <span id="simulated-code"></span>
                    </p></div>
                </div>

            <div id="completion-message" class="completion-message">✅ تم إكمال البيانات بنجاح! الآن يمكنك فتح القائمة الجانبية والانتقال إلى **"اختبار كلمة المرور"**.
            </div></div>

        <div id="test" class="page-content test-section"><div class="password-test-area">
                <h2><i class="fa-solid fa-lock"></i> اختبار قوة كلمة المرور المُحسن</h2><p style="font-size: 1.05rem; color: #555; max-width: 600px; margin: 0 auto 30px;">
                    اكتب كلمة مرورك في الحقل أدناه أو استخدم زر "اقتراح كلمة مرور قوية" لفحص مدى أمانها ضد بياناتك الشخصية والتسلسلات الشائعة.
                </p>

                <button class="generate-btn" onclick="suggestPassword()"><i class="fa-solid fa-wand-magic-sparkles"></i> اقتراح كلمة مرور قوية</button><div class="password-field-container"><input type="password" id="password" placeholder="اكتب كلمة المرور هنا..." dir="ltr" oninput="checkPasswordStrength(); preventArabic(this);" /> 
                    <i class="fa-solid fa-eye toggle-password" id="toggle-icon" onclick="togglePasswordVisibility()"></i></div><div class="strength-feedback-container"><div class="strength-bar"><div class="bar" id="bar"></div></div><div class="strength-message msg-neutral" id="strength-text">ابدأ بالكتابة لبدء الفحص الفوري</div></div></div>
        </div>
        
        <div id="mfa" class="page-content mfa-section"><h2><i class="fa-solid fa-shield-halved"></i> المصادقة متعددة العوامل (MFA)</h2><div class="mfa-info"><p>
                    كلمة المرور القوية هي خط الدفاع الأول، ولكنها قد تخترق بسبب التسريب أو التصيد الاحتيالي (Phishing). المصادقة متعددة العوامل (Multi-Factor Authentication - MFA) تضيف **طبقة حماية ثانية** وضرورية لحماية حساباتك، حتى لو تمكن المخترق من معرفة كلمة مرورك.
                </p>

                <h3>كيف تعمل المصادقة متعددة العوامل؟</h3>
                <p>تطلب MFA التحقق من هويتك باستخدام عاملين أو أكثر من الفئات التالية:</p>
                
                <ul class="mfa-steps"><li>**شيء تعرفه:** (مثل كلمة المرور أو رقم التعريف الشخصي).</li>
                    <li>**شيء تملكه:** (مثل هاتفك لتلقي رمز SMS، أو تطبيق المصادقة مثل Google Authenticator).</li>
                    <li>**شيء يخصك:** (مثل بصمة الإصبع أو مسح الوجه).</li>
                </ul>

                <p>
                    **نصيحة أمنية:** **لا تكتفِ بكلمة المرور.** فعِّل المصادقة متعددة العوامل على جميع حساباتك الحساسة (الإيميل، البنوك، وسائل التواصل الاجتماعي).
                </p>
                <button class="generate-btn" style="background-color: #007bff; margin-top: 20px;" onclick="window.open('https://support.google.com/accounts/answer/185839?hl=ar', '_blank')"><i class="fa-solid fa-lock"></i> تعلم المزيد عن MFA</button>
            </div>
        </div>
        
        <div id="contact" class="page-content contact-section"><h2><i class="fa-solid fa-envelope"></i> تواصل معنا</h2><div class="contact-info">
                <p>هذا القسم مخصص للتواصل فقط.</p>
                <p>**الإيميل الأول:** <a href="mailto:444911678@student.ksu.edu.sa">444911678@student.ksu.edu.sa</a></p>
                <p>**الإيميل الثاني:** <a href="mailto:444911666@student.ksu.edu.sa">444911666@student.ksu.edu.sa</a></p>
                <p>**الإيميل الثالث:** <a href="mailto:445912499@student.ksu.edu.sa">445912499@student.ksu.edu.sa</a></p>
                <p>**الإيميل الرابع:** <a href="mailto:445911456@student.ksu.edu.sa">445911456@student.ksu.edu.sa</a></p>
                <p>**الإيميل الخامس:** <a href="mailto:444911176@student.ksu.edu.sa">444911176@student.ksu.edu.sa</a></p>
            </div>
        </div>
    </div>

    <script>
        // ------------------- متغيرات الإيميل والتأكيد -------------------
        // توضيح: متغير عالمي لتخزين الرمز العشوائي لغرض المحاكاة
        let currentVerificationCode = '';

        // ------------------- دوال التحكم في الواجهة والتنقل -------------------
        
        // توضيح: فتح القائمة الجانبية (Sidebar)
        function openNav() {
            document.getElementById("mySidebar").style.width = "250px"; // توضيح: تعيين عرض القائمة
            document.getElementById("main").style.marginRight = "250px"; // توضيح: دفع المحتوى الرئيسي
            document.querySelector(".top-controls").style.right = "265px"; // توضيح: تحريك أزرار التحكم
        }

        // توضيح: إغلاق القائمة الجانبية (Sidebar)
        function closeNav() {
            document.getElementById("mySidebar").style.width = "0"; // توضيح: إخفاء القائمة
            document.getElementById("main").style.marginRight = "0"; // توضيح: إعادة المحتوى
            document.querySelector(".top-controls").style.right = "15px"; // توضيح: إعادة أزرار التحكم لمكانها
        }
        
        // توضيح: التبديل بين الأقسام (التبويبات)
        function switchTab(sectionId) {
            document.querySelectorAll('.page-content').forEach(content => {
                content.classList.remove('active'); // توضيح: إخفاء جميع الأقسام
            });
            document.querySelectorAll('.sidebar-button').forEach(button => {
                button.classList.remove('active'); // توضيح: إلغاء تفعيل جميع الأزرار
            });

            const targetSection = document.getElementById(sectionId);
            const targetButton = document.querySelector(`.sidebar-button[data-section="${sectionId}"]`);
            
            // توضيح: تفعيل القسم والزر المطلوب إذا لم يكن معطلاً
            if (targetSection && targetButton && !targetButton.classList.contains('disabled')) {
                targetSection.classList.add('active'); // توضيح: تفعيل رؤية القسم
                targetButton.classList.add('active'); // توضيح: تفعيل زر التبويب
            } else if (targetSection && targetButton && sectionId === 'login-home') {
                targetSection.classList.add('active'); // توضيح: تفعيل رؤية القسم
                targetButton.classList.add('active'); // توضيح: تفعيل زر التبويب
            }
        }
        
        // توضيح: إظهار أو إخفاء كلمة المرور (أيقونة العين)
        function togglePasswordVisibility() {
            const input = document.getElementById('password'); // توضيح: جلب حقل كلمة المرور
            const icon = document.getElementById('toggle-icon'); // توضيح: جلب أيقونة العين

            if (input.type === 'password') { // توضيح: إذا كان نوعه كلمة مرور (مخفي)
                input.type = 'text'; // توضيح: غيّر النوع إلى نص (لإظهاره)
                icon.classList.remove('fa-eye'); // توضيح: إزالة أيقونة العين المفتوحة
                icon.classList.add('fa-eye-slash'); // توضيح: وضع أيقونة العين المغلقة
            } else { // توضيح: إذا كان نوعه نص (مرئي)
                input.type = 'password'; // توضيح: غيّر النوع إلى كلمة مرور (لإخفائه)
                icon.classList.remove('fa-eye-slash'); // توضيح: إزالة أيقونة العين المغلقة
                icon.classList.add('fa-eye'); // توضيح: وضع أيقونة العين المفتوحة
            }
        }

        // ------------------- دوال اللغة والتحقق -------------------
        
        // توضيح: الدالة الأساسية لمنع إدخال الأحرف العربية (تُستدعى عند كل إدخال)
        function preventArabic(input) {
            // توضيح: نمط يطابق جميع الأحرف العربية
            const arabicRegex = /[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/g;
            
            const originalValue = input.value; // توضيح: القيمة الأصلية المدخلة
            const newValue = originalValue.replace(arabicRegex, ''); // توضيح: إزالة أي حرف عربي
            
            if (originalValue !== newValue) { // توضيح: إذا تم اكتشاف تغيير (وجود أحرف عربية)
                input.value = newValue; // توضيح: تحديث قيمة الحقل بالنسخة النظيفة (الإنجليزية/الأرقام)
            }
        }

        // توضيح: دوال الوضع الداكن (للحفاظ على الحالة)
        function toggleDarkMode() {
            const body = document.body; // توضيح: جلب وسم الجسم
            body.classList.toggle('dark-mode'); // توضيح: تبديل كلاس 'dark-mode'
            const isDarkMode = body.classList.contains('dark-mode'); // توضيح: التحقق من الحالة
            localStorage.setItem('dark-mode', isDarkMode ? 'enabled' : 'disabled'); // توضيح: حفظ الحالة في المتصفح
            // توضيح: تحديث أيقونة الزر في القائمة (شمس/قمر)
            document.querySelector('.dark-mode-btn-sidebar i').classList.toggle('fa-sun', isDarkMode);
            document.querySelector('.dark-mode-btn-sidebar i').classList.toggle('fa-moon', !isDarkMode);
        }

        function loadDarkMode() {
            // توضيح: تحميل حالة الوضع الداكن من الذاكرة المحلية عند بدء التشغيل
            if (localStorage.getItem('dark-mode') === 'enabled') {
                document.body.classList.add('dark-mode');
            } 
            // توضيح: تحديث أيقونة الوضع الداكن في البداية بناءً على الحالة
            const isDarkMode = document.body.classList.contains('dark-mode');
            const icon = document.querySelector('.dark-mode-btn-sidebar i');
            icon.classList.toggle('fa-sun', isDarkMode);
            icon.classList.toggle('fa-moon', !isDarkMode);
        }

        // توضيح: التحقق من صحة البريد الإلكتروني (بصيغة أساسية)
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // توضيح: نمط regex لفحص صيغة الإيميل
            return emailRegex.test(email); // توضيح: إرجاع نتيجة الفحص
        }
        
        // 🆕 الدالة الجديدة: التحقق من تطابق حقلي الإيميل
        function validateEmailMatch() {
            const email = document.getElementById('email-address').value.trim(); // توضيح: قيمة الإيميل الأساسي
            const confirmEmail = document.getElementById('email-confirm').value.trim(); // توضيح: قيمة إيميل التأكيد
            const errorElement = document.getElementById('email-mismatch-error'); // توضيح: عنصر رسالة الخطأ
            
            // توضيح: شرط التطابق: يجب أن تكونا غير فارغتين ومتطابقتين
            if (email !== '' && confirmEmail !== '' && email !== confirmEmail) {
                errorElement.style.display = 'block'; // توضيح: إظهار الخطأ
                return false;
            } else {
                errorElement.style.display = 'none'; // توضيح: إخفاء الخطأ
                return true;
            }
        }

        // 🆕 الدالة الجديدة: محاكاة إرسال رمز التأكيد
        function simulateSendCode() {
            const email = document.getElementById('email-address').value.trim();
            const confirmEmail = document.getElementById('email-confirm').value.trim();

            // توضيح: التحقق الأولي من تطابق وصحة الإيميل قبل المحاكاة
            if (!isValidEmail(email) || email === '' || email !== confirmEmail) {
                alert('الرجاء إدخال إيميل متطابق وصحيح أولاً.');
                return;
            }

            // توضيح: توليد رمز عشوائي مكون من 6 أرقام
            const code = Math.floor(100000 + Math.random() * 900000).toString();
            currentVerificationCode = code; // تخزين الرمز عالمياً
            
            // توضيح: عرض الرمز للمستخدم (محاكاة لوصول الرمز إلى الإيميل)
            document.getElementById('simulated-code').textContent = code;
            document.getElementById('simulated-code-display').style.display = 'block';
            
            alert(`(محاكاة) تم إنشاء الرمز بنجاح! الرمز هو: ${code} - أدخله في الحقل بالأسفل.`);

            // توضيح: تفعيل حقل إدخال الرمز
            document.getElementById('verification-code').disabled = false;
        }

        // توضيح: تفعيل/إلغاء خيار "لا يوجد"
        function toggleNoData(button) {
            const fieldId = button.getAttribute('data-field'); // توضيح: جلب معرف الحقل المرتبط
            const inputField = document.getElementById(fieldId); // توضيح: جلب حقل الإدخال
            
            const isActive = button.classList.toggle('active'); // توضيح: تبديل حالة التفعيل للزر

            if (isActive) { // توضيح: إذا تم تفعيله
                inputField.value = 'N/A'; // توضيح: تعيين قيمة لغرض الفحص
                inputField.disabled = true; // توضيح: تعطيل الحقل
            } else { // توضيح: إذا تم إلغاء تفعيله
                inputField.value = ''; // توضيح: تفريغ القيمة
                inputField.disabled = false; // توضيح: تفعيل الحقل
                inputField.focus(); // توضيح: وضع المؤشر داخل الحقل
            }
            
            checkAllFieldsFilled(); // توضيح: إعادة فحص اكتمال النموذج
        }

        // توضيح: التحقق من اكتمال حقول البيانات الشخصية لتفعيل زر الاختبار
        // ⚠️ mobile-number الآن ضمن الحقول الإجبارية
        const requiredFields = ['full-name', 'id-number', 'mother-name', 'father-name', 'email-address', 'mobile-number', 'email-confirm', 'verification-code']; // توضيح: الحقول الإجبارية
        const optionalFields = ['job-id', 'student-id', 'pet-name', 'pet-count', 'children-names']; // توضيح: الحقول الاختيارية
        
        function checkAllFieldsFilled() {
            let allFilled = true; // توضيح: متغير تتبع الحالة

            // 1.5: التحقق من تطابق حقلي الإيميل
            if (!validateEmailMatch()) {
                allFilled = false;
            }

            // 1. فحص الحقول الإجبارية
            requiredFields.forEach(id => { // توضيح: المرور على كل حقل إجباري
                const field = document.getElementById(id); // توضيح: جلب الحقل
                // التحقق من الحقل الإجباري إذا لم يكن معطلًا
                if (field && !field.disabled && field.value.trim() === '') { // توضيح: إذا كان فارغاً
                    allFilled = false; // توضيح: الفشل في التحقق
                }
            });
            
            // 2. فحص صحة البريد الإلكتروني (إجباري)
            const emailField = document.getElementById('email-address'); // توضيح: جلب حقل الإيميل
            if (emailField && emailField.value.trim() !== '' && !isValidEmail(emailField.value.trim())) {
                allFilled = false; // توضيح: الفشل إذا كانت الصيغة غير صحيحة
            }

            // 🆕 3. التحقق من رمز التأكيد المُحاكى
            const userCode = document.getElementById('verification-code').value.trim();
            if (userCode !== '' && currentVerificationCode !== '' && userCode !== currentVerificationCode) {
                 // توضيح: إذا أدخل المستخدم رمزاً وكانت قيمته غير متطابقة مع الرمز المُخزن
                allFilled = false; 
                document.getElementById('verification-code').style.borderColor = '#e74c3c'; // تمييز الحقل باللون الأحمر
                alert('رمز التأكيد غير صحيح.');
            } else {
                document.getElementById('verification-code').style.borderColor = ''; // إزالة التمييز
            }
            
            // 4. فحص الحقول الاختيارية 
            optionalFields.forEach(id => { // توضيح: المرور على الحقول الاختيارية
                const field = document.getElementById(id);
                if (field && field.value.trim() === '') { // توضيح: إذا كان الحقل فارغاً
                    if (!field.disabled) { // توضيح: والزر "لا يوجد" غير مضغوط
                        allFilled = false; // توضيح: الفشل في التحقق
                    }
                }
            });

            const testButton = document.getElementById('test-tab-button'); // توضيح: زر تبويب الاختبار
            const completionMessage = document.getElementById('completion-message'); // توضيح: رسالة التوجيه

            if (allFilled) {
                // توضيح: تفعيل زر الاختبار عند اكتمال التحقق
                testButton.classList.remove('disabled'); // توضيح: إزالة التعطيل
                completionMessage.style.display = 'block'; // توضيح: إظهار رسالة التوجيه
            } else {
                // توضيح: تعطيل زر الاختبار
                testButton.classList.add('disabled'); // توضيح: تفعيل التعطيل
                completionMessage.style.display = 'none'; // توضيح: إخفاء رسالة التوجيه
                updateStrengthUI(0, "neutral", "ابدأ بالكتابة لبدء الفحص الفوري"); // توضيح: إعادة تعيين شريط القوة
            }
        }


        // ------------------- دالة توليد كلمات مرور قوية -------------------
        function suggestPassword() {
            // توضيح: مجموعة الأحرف الممكنة لتوليد كلمة مرور قوية
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+{}[]|:;"<>,.?/~`';
            let password = ''; // توضيح: متغير لتخزين كلمة المرور المولدة
            const length = 16; // توضيح: طول كلمة المرور (16 حرفاً)

            // توضيح: ضمان وجود متطلبات التنوع الأساسية (حرف كبير، صغير، رقم، رمز)
            const requirements = [
                () => 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'[Math.floor(Math.random() * 26)], // توضيح: توليد حرف كبير عشوائي
                () => 'abcdefghijklmnopqrstuvwxyz'[Math.floor(Math.random() * 26)], // توضيح: توليد حرف صغير عشوائي
                () => '0123456789'[Math.floor(Math.random() * 10)], // توضيح: توليد رقم عشوائي
                () => '!@#$%^&*()_+\-=\[\]{};\':"\\|,.<>\/?]'[Math.floor(Math.random() * 25)], // توضيح: توليد رمز خاص عشوائي
            ];

            for (let i = 0; i < requirements.length; i++) { // توضيح: إضافة المتطلبات الأساسية
                password += requirements[i]();
            }

            // توضيح: إكمال الطول المطلوب بأحرف عشوائية
            for (let i = password.length; i < length; i++) {
                password += chars[Math.floor(Math.random() * chars.length)];
            }

            // توضيح: خلط الأحرف لزيادة العشوائية
            password = password.split('').sort(() => 0.5 - Math.random()).join('');

            document.getElementById('password').value = password; // توضيح: تعيين الكلمة الجديدة في الحقل
            
            // توضيح: إظهار كلمة المرور المؤقت ثم إخفاؤها بعد 3 ثوانٍ
            togglePasswordVisibility(); // توضيح: إظهار النص
            setTimeout(() => { // توضيح: تشغيل مؤقت
                const input = document.getElementById('password');
                const icon = document.getElementById('toggle-icon');
                if (input.type === 'text') { // توضيح: التحقق مما إذا كان النص مرئياً
                    input.type = 'password'; // توضيح: إخفاء النص مرة أخرى
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            }, 3000); // توضيح: بعد 3000 ملي ثانية (3 ثواني)
            checkPasswordStrength(); // توضيح: فحص الكلمة بعد التوليد
        }

        // ------------------- دالة حساب وقت الكسر المقدر (جديدة) -------------------
        function estimateCrackTime(score) {
            // توضيح: مقياس تقديري لوقت الكسر بناءً على درجة القوة (Score)
            const baseTimeSeconds = 1; // توضيح: وقت الكسر الأساسي
            const factor = 1000; // توضيح: معامل الزيادة لكل نقطة قوة
            
            // توضيح: تحويل درجة القوة إلى وقت بالثواني (نمو أُسي بسيط)
            let timeInSeconds = baseTimeSeconds * Math.pow(factor, (score / 10)); 

            if (timeInSeconds < 60) {
                return `أقل من دقيقة واحدة ⏱️`;
            } else if (timeInSeconds < 3600) {
                return `${Math.ceil(timeInSeconds / 60)} دقيقة ⏰`;
            } else if (timeInSeconds < 86400) {
                return `${Math.ceil(timeInSeconds / 3600)} ساعة ⏳`;
            } else if (timeInSeconds < 31536000) {
                return `${Math.ceil(timeInSeconds / 86400)} يوم`;
            } else if (timeInSeconds < 31536000000) {
                return `${Math.ceil(timeInSeconds / 31536000)} سنة 🗓️`;
            } else {
                return `أكثر من 1000 سنة 🛡️`;
            }
        }
        
        // ------------------- دالة فحص قوة كلمة المرور (معدلة) -------------------
        const commonSequences = [
            // توضيح: سلاسل كلمات المرور الشائعة للفحص
            '12345', 'qwerty', 'asdfg', 'zxcvb', 'qazwsxedc', 'edcwsz', 'password', 'welcome',
            'abc', 'def', 'ghi', 'jkl', 'mno', 'pqr', 'stu', 'vwx', 'yz',
            '012', '123', '234', '345', '456', '567', '678', '789', '890',
            'qwer', 'asdf', 'zxcv', 'tyui', 'ghjk', 'bnm', 'iop', 'lkj', 'mnb'
        ];

        function checkPasswordStrength() {
            // توضيح: العناصر الرئيسية للفحص
            const passwordInput = document.getElementById("password"); // توضيح: جلب حقل الإدخال
            const value = passwordInput.value; // توضيح: القيمة الحالية لكلمة المرور
            let strength = 0; // توضيح: درجة القوة (تبدأ من صفر)
            let isPersonalDataIncluded = false; // توضيح: علم للتطابق مع البيانات الشخصية
            let isCommonSequence = false; // توضيح: علم للتطابق مع سلاسل شائعة
            let penalty = 0; // توضيح: متغير لتخفيض الدرجة بسبب الضعف

            if (value.length === 0) {
                updateStrengthUI(0, "neutral", "ابدأ بالكتابة لبدء الفحص الفوري"); // توضيح: إعادة تعيين الواجهة
                return; // توضيح: الخروج من الدالة
            }

            // 1. فحص التسلسل الشائع (لدرجة القوة)
            const passwordValueClean = value.toLowerCase().replace(/\s/g, ''); // توضيح: تنظيف الكلمة للمقارنة
            for (const seq of commonSequences) { // توضيح: المرور على السلاسل الشائعة
                if (passwordValueClean.includes(seq)) { // توضيح: إذا وجد تطابق
                    isCommonSequence = true; // توضيح: تعيين العلم
                    penalty += 5; // توضيح: إضافة عقوبة قوية
                    break; // توضيح: الخروج من الحلقة
                }
            }
            
            // 2. فحص البيانات الشخصية (التطابق)
            const personalDataFields = [ /* توضيح: مصفوفة ببيانات المستخدم */
                document.getElementById('full-name').value,
                document.getElementById('mother-name').value,
                document.getElementById('father-name').value,
                document.getElementById('pet-name').value,
                document.getElementById('children-names').value,
                document.getElementById('id-number').value,
                document.getElementById('job-id').value,
                document.getElementById('student-id').value,
                document.getElementById('email-address').value,
                document.getElementById('mobile-number').value
            ];

            personalDataFields.forEach(data => { // توضيح: المرور على بيانات المستخدم
                if (data && data.length > 2 && data.trim() !== 'N/A') { // توضيح: تجاهل الحقول القصيرة أو الفارغة
                    const dataClean = data.toLowerCase().replace(/\s/g, '').replace(/[^\w\s\d]/g, ''); // توضيح: تنظيف البيانات للمقارنة
                    let dataParts = [dataClean]; // توضيح: بدء بمقارنة الكلمة كاملة
                    if (data.includes(' ') || data.includes(',')) { // توضيح: تقسيم الأسماء المركبة
                        dataParts = data.split(/[\s,]+/).map(part => part.toLowerCase().replace(/[^\w\d]/g, '').trim()).filter(part => part.length > 2);
                    }
                    const numbersOnly = dataClean.match(/\d+/g); // توضيح: استخراج الأرقام فقط (للهوية)
                    if (numbersOnly) {
                        dataParts.push(numbersOnly.join(''));
                    }

                    dataParts.forEach(part => { // توضيح: مقارنة كل جزء من البيانات
                        if (part.length > 2 && passwordValueClean.includes(part)) {
                            isPersonalDataIncluded = true; // توضيح: تعيين العلم إذا وجد تطابق
                        }
                    });
                }
            });
            
            // 3. حساب درجة القوة الأساسية
            if (value.length >= 14) { strength += 5; } else if (value.length >= 10) { strength += 3; } else if (value.length > 0) { strength += 1; } // توضيح: نقاط الطول
            if (/[a-z]/.test(value) && /[A-Z]/.test(value)) strength += 2; // توضيح: نقاط الأحرف الكبيرة والصغيرة
            if (/\d/.test(value)) strength += 2; // توضيح: نقاط الأرقام
            if (/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(value)) strength += 3; // توضيح: نقاط الرموز الخاصة
            if (/(.)\1{2,}/.test(value)) strength -= 2; // توضيح: عقوبة التكرار (مثل aaa)
            
            strength -= penalty; // توضيح: تطبيق العقوبات
            strength = Math.max(0, strength); // توضيح: ضمان عدم نزول القوة تحت الصفر
            
            // 4. تحديد النتيجة النهائية
            let statusText = ''; // توضيح: نص الحالة النهائي
            let statusClass = ''; // توضيح: كلاس اللون للشريط
            let barWidth = 0; // توضيح: عرض الشريط
            
            // توضيح: حساب وقت الكسر المقدر
            const crackTime = estimateCrackTime(strength); 


            if (isPersonalDataIncluded || isCommonSequence || strength < 4) { // توضيح: فئة ضعيف جداً (الشروط الخطيرة)
                barWidth = 25;
                statusClass = 'very-weak';
                if (isPersonalDataIncluded) {
                    statusText = `⛔️ **ضعيفة جداً!** لا تستخدم بياناتك الشخصية. <br> الوقت التقديري للكسر: ${crackTime}`;
                } else if (isCommonSequence) {
                    statusText = `❌ **ضعيفة جداً!** لا تستخدم تسلسلات شائعة. <br> الوقت التقديري للكسر: ${crackTime}`;
                } else {
                    statusText = `🔴 ضعيفة جداً. يجب زيادة الطول والتنوع. <br> الوقت التقديري للكسر: ${crackTime}`;
                }
            } else if (strength < 7) { // توضيح: فئة ضعيف
                barWidth = 50;
                statusClass = 'weak';
                statusText = `🟠 ضعيفة. حاول إضافة المزيد من الرموز والأحرف الكبيرة. <br> الوقت التقديري للكسر: ${crackTime}`;
            } else if (strength < 10) { // توضيح: فئة جيد
                barWidth = 75;
                statusClass = 'good';
                statusText = `🟡 جيدة. كلمة مرور صعبة التخمين. <br> الوقت التقديري للكسر: ${crackTime}`;
            } else { // توضيح: فئة قوية جداً
                barWidth = 100;
                statusClass = 'strong';
                statusText = `✅ **قوية جداً وممتازة!** حافظ على هذه القوة. <br> الوقت التقديري للكسر: ${crackTime}`;
            }

            // توضيح: تحديث الواجهة
            updateStrengthUI(barWidth, statusClass, statusText);
        }

        // توضيح: دالة مساعدة لتحديث عرض شريط القوة والنص المرافق له
        function updateStrengthUI(width, className, statusText) {
            document.getElementById("bar").style.width = `${width}%`; // توضيح: تعيين عرض الشريط الملون
            document.getElementById("bar").className = `bar ${className}`; // توضيح: تعيين كلاس اللون للشريط
            
            const textElement = document.getElementById("strength-text"); // توضيح: جلب عنصر النص
            textElement.innerHTML = statusText; // توضيح: تعيين النص
            textElement.className = `strength-message msg-${className}`; // توضيح: تعيين كلاس اللون للنص
        }

        // توضيح: تشغيل الفحص الأولي عند تحميل الصفحة
        window.addEventListener('load', checkAllFieldsFilled); // توضيح: استدعاء الدالة عند اكتمال تحميل الصفحة
    </script>
</body>
</html>
